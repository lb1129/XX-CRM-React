"use strict";(self.webpackChunkl_admin_react=self.webpackChunkl_admin_react||[]).push([[75762,12019],{27690:function(e,n,t){t.d(n,{N:function(){return o}});var r=t(74165),a=t(15861),c=t(55611),i=t(84312),s=t(32335),o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,o,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get(i.gh,{params:{ext:n.name.slice(n.name.lastIndexOf("."))}});case 2:return a=e.sent,o=a.data,l=new FormData,Object.keys(o).forEach((function(e){var n=o[e];l.append(e,n)})),l.append("file",n),e.next=9,c.Z.post(s.Z.http.uploadURL,l,{onUploadProgress:function(e){if(e.total){var n=Math.round(100*e.loaded/e.total);t&&t(n)}}});case 9:return e.abrupt("return","".concat(s.Z.http.downloadURL,"/").concat(o.key));case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},20377:function(e,n,t){t.d(n,{l:function(){return c}});var r=t(838),a=t(92465),c=function(e){var n=a.Z.useToken();return(0,r.iv)(e(n))}},75762:function(e,n,t){t.r(n);var r=t(74165),a=t(15861),c=t(29439),i=t(47313),s=t(75590),o=t(20377),l=t(79930),u=t(68197),f=t(59624),p=t(40440),d=t(59491),h=t(69918),m=t(75834),x=t(92594),v=t(10340),Z=t(52476),k=t(12019),w=t(27690),j=t(98457),b=t(37413),g=t(46417);n.default=function(){var e=(0,i.useState)(!1),n=(0,c.Z)(e,2),t=n[0],y=n[1],z=(0,i.useState)(!1),I=(0,c.Z)(z,2),L=I[0],N=I[1],C=(0,s.$G)().t,R=(0,v.C)((function(e){return e.userInfo})),B=(0,v.T)(),F=l.Z.useForm(),P=(0,c.Z)(F,1)[0],S=(0,o.l)((function(e){e.token;return{fontSize:"20px",fontWeight:500,lineHeight:"28px",marginBottom:"24px"}})),_=(0,o.l)((function(e){e.token;return{display:"inline-block",position:"relative"}})),A=(0,o.l)((function(e){var n=e.token;return{display:"inline-block",borderRadius:"50%",overflow:"hidden",border:"1px solid ".concat(n.colorBorder)}})),E=(0,o.l)((function(e){e.token;return{position:"absolute",bottom:0,left:"18px"}}));(0,i.useEffect)((function(){P.setFieldsValue({nickname:R.nickname,profile:R.profile})}),[P,R.nickname,R.profile]);var T=(0,i.useCallback)(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,e.next=4,(0,w.N)(n.file);case 4:return t=e.sent,e.next=7,(0,j.zu)({avatar:t});case 7:b.yw.success(C("whatSuccess",{what:C("editAvatar")})),B((0,Z.p)({avatar:t})),N(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),N(!1);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(n){return e.apply(this,arguments)}}(),[B,C]),U=(0,i.useCallback)(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,(0,j.zu)({nickname:n.nickname,profile:n.profile});case 4:b.yw.success(C("whatSuccess",{what:C("updateBasicInfo")})),B((0,Z.p)({nickname:n.nickname,profile:n.profile})),y(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),y(!1);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),[B,C]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h1",{className:S,children:C("basicInfo")}),(0,g.jsxs)(u.Z,{children:[(0,g.jsx)(f.Z,{span:14,children:(0,g.jsxs)(l.Z,{layout:"vertical",onFinish:U,form:P,children:[(0,g.jsx)(l.Z.Item,{label:C("nickname"),name:"nickname",rules:[function(){return{validator:function(e,n){return n&&/^[\u4e00-\u9fa5A-Za-z0-9_-]{4,10}$/.test(n)?Promise.resolve():Promise.reject(C("nicknameRule"))}}}],children:(0,g.jsx)(p.Z,{placeholder:C("pleaseEnterNickname")})}),(0,g.jsx)(l.Z.Item,{label:C("profile"),name:"profile",children:(0,g.jsx)(p.Z.TextArea,{rows:4,placeholder:C("profile")})}),(0,g.jsx)(l.Z.Item,{children:(0,g.jsx)(d.ZP,{loading:t,type:"primary",htmlType:"submit",children:C("updateBasicInfo")})})]})}),(0,g.jsx)(f.Z,{span:10,style:{textAlign:"center"},children:(0,g.jsxs)("div",{className:_,children:[(0,g.jsx)(h.Z,{spinning:L,children:(0,g.jsx)("div",{className:A,children:(0,g.jsx)(m.Z,{width:200,height:200,src:R.avatar})})}),L?null:(0,g.jsx)(x.Z,{className:E,maxCount:1,accept:"image/*",showUploadList:!1,customRequest:T,children:(0,g.jsx)(d.ZP,{shape:"circle",size:"large",icon:(0,g.jsx)(k.default,{})})})]})})]})]})}},12019:function(e,n,t){t.r(n),t.d(n,{default:function(){return o}});var r=t(87462),a=t(47313),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},i=t(17469),s=function(e,n){return a.createElement(i.Z,(0,r.Z)({},e,{ref:n,icon:c}))};var o=a.forwardRef(s)}}]);