"use strict";(self.webpackChunkl_admin_react=self.webpackChunkl_admin_react||[]).push([[97476],{5212:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(1413),i=n(4942),a=n(47313),o=n(58467),u=n(46123),c=n.n(u),d=n(83551),l=n(20377);var s=n(46417),f=(0,a.forwardRef)((function(e,t){var n=e.disabled,u=e.onClick,f=e.to,h=e.children,p=e.target,v=e.style,y=e.replace,g={wrap:(0,l.l)((function(e){var t=e.token;return{color:t.colorLink,cursor:"pointer","&:hover":{color:t.colorLinkHover}}})),disabled:(0,l.l)((function(){return{cursor:"not-allowed",color:"rgba(0, 0, 0, 0.25) !important"}}))},Z=(0,o.s0)(),k=(0,a.useMemo)((function(){return c()(g.wrap,(0,i.Z)({},g.disabled,n))}),[n,g]),w=(0,a.useMemo)((function(){if(f){if("string"===typeof f)return f;if(f.id)return(0,d.a9)(f);var e=f;return"".concat(e.pathname).concat(e.search).concat(e.hash)}}),[f]),x=(0,a.useCallback)((function(e){if(!n)return u?(e.preventDefault(),void u(e)):void("_blank"!==p&&(e.preventDefault(),"number"===typeof f?Z(f):f&&f.id?Z((0,r.Z)((0,r.Z)({},f),{},{replace:y})):Z(f,{replace:y})));e.preventDefault()}),[Z,u,f,p,n,y]);return(0,s.jsx)("a",{href:w,target:p,ref:t,style:v,onClick:x,className:k,children:h})}))},62202:function(e,t,n){n.d(t,{y:function(){return r}});var r=Symbol("productEditDone")},31876:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),a=function(){function e(){(0,r.Z)(this,e),this.store=void 0,this.store=new Map}return(0,i.Z)(e,[{key:"on",value:function(e,t,n){var r={handler:t,once:!!n};if(this.store.has(e)){var i=this.store.get(e);null===i||void 0===i||i.push(r)}else this.store.set(e,[r])}},{key:"off",value:function(e,t){if(this.store.has(e)){var n=this.store.get(e),r=null===n||void 0===n?void 0:n.findIndex((function(e){return e.handler===t}));(r||0===r)&&(null===n||void 0===n||n.splice(r,1))}}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.store.has(e)){var a=this.store.get(e);null===a||void 0===a||a.forEach((function(n){n.handler.apply(n,r),n.once&&t.off(e,n.handler)}))}}},{key:"once",value:function(e,t){this.on(e,t,!0)}}]),e}(),o=new a},86081:function(e,t,n){n.d(t,{Bo:function(){return o},D$:function(){return c},RC:function(){return u},jS:function(){return a}});var r=n(55611),i=n(84312),a=function(e){return r.Z.get(i.ut,{params:{id:e}})},o=function(e){return r.Z.post(i.yZ,e)},u=function(e){return r.Z.delete(i.yg,{data:{ids:e}})},c=function(e){return r.Z.post(i.jN,e)}},50312:function(e,t,n){n.d(t,{a:function(){return u},o:function(){return o}});var r=n(93433),i=n(58467),a=n(10340),o=function(e){return 0===e},u=function(){for(var e=(0,i.SN)(),t=e[e.length-1].id,n=(0,a.C)((function(e){return e.menuData.data})),o={},u=(0,r.Z)(n);u.length;){var c=u.shift();if(c.pageUrl&&c.pageUrl.split("/")[1]===t){c.operateAuth&&(o=c.operateAuth);break}c.children&&c.children.length&&(u=[].concat((0,r.Z)(c.children),(0,r.Z)(c.children)))}return{operateAuth:o}}},20377:function(e,t,n){n.d(t,{l:function(){return a}});var r=n(838),i=n(92465),a=function(e){var t=i.Z.useToken();return(0,r.iv)(e(t))}},59943:function(e,t,n){n.d(t,{a:function(){return o}});var r=n(29439),i=n(47313),a=n(1355),o=function(e,t){var n=(0,i.useState)(0),o=(0,r.Z)(n,2),u=o[0],c=o[1],d=(0,i.useState)(0),l=(0,r.Z)(d,2),s=l[0],f=l[1];return(0,i.useLayoutEffect)((function(){var n,r=e.current;return r&&(n=new a.Z((function(e){var n,r;f(e[0].contentRect.width-(t&&null!==(n=t.minusWidth)&&void 0!==n?n:0)),c(e[0].contentRect.height-(t&&null!==(r=t.minusHeight)&&void 0!==r?r:0))}))).observe(r),function(){r&&n.unobserve(r)}}),[e,t]),{width:s,height:u}}},97476:function(e,t,n){n.r(t);var r=n(74165),i=n(15861),a=n(29439),o=n(47313),u=n(59491),c=n(87785),d=n(23983),l=n(6314),s=n(40440),f=n(59943),h=n(50312),p=n(75590),v=n(58467),y=n(5212),g=n(86081),Z=n(31876),k=n(62202),w=n(37413),x=n(46417);t.default=function(){var e=(0,o.useState)(0),t=(0,a.Z)(e,2),n=t[0],m=t[1],b=(0,o.useState)(!1),S=(0,a.Z)(b,2),j=S[0],C=S[1],I=(0,o.useState)([]),D=(0,a.Z)(I,2),_=D[0],z=D[1],N=(0,o.useState)([]),P=(0,a.Z)(N,2),A=P[0],E=P[1],R=(0,o.useState)({pageNo:1,pageSize:10,keyword:""}),L=(0,a.Z)(R,2),M=L[0],B=L[1],H=(0,o.useRef)(null),T=(0,f.a)(H,{minusHeight:128.8+54.8}).height,$=(0,h.a)().operateAuth,F=(0,p.$G)().t,G=(0,v.s0)(),K=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",width:150,fixed:"left",render:function(e,t){return(0,x.jsx)(y.Z,{disabled:(0,h.o)($.detail),to:{id:"ProductDetail",params:{id:t._id}},children:e})}},{title:"\u54c1\u724c",dataIndex:"brand",key:"brand",width:150},{title:"\u7c7b\u522b",dataIndex:"category",key:"category",width:150},{title:"\u4ef7\u683c",dataIndex:"price",key:"price",width:150},{title:"\u989c\u8272",dataIndex:"color",key:"color",width:150},{title:"\u6b3e\u5f0f",dataIndex:"style",key:"style",width:150,ellipsis:!0},{title:"\u662f\u5426\u542f\u7528",dataIndex:"enable",key:"enable",width:150},{title:"\u5e93\u5b58",dataIndex:"inventory",key:"inventory",width:150},{title:"\u63cf\u8ff0",dataIndex:"describe",key:"describe",width:150},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",width:180,fixed:"right",align:"center",render:function(e,t){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.ZP,{type:"link",disabled:(0,h.o)($.edit),onClick:function(){G({id:"ProductAddOrEdit",params:{id:t._id}})},children:F("edit")}),(0,x.jsx)(c.Z,{type:"vertical"}),(0,x.jsx)(d.Z,{disabled:(0,h.o)($.delete),title:F("areYouSureDelete"),onConfirm:function(){return U(t._id)},children:(0,x.jsx)(u.ZP,{type:"link",disabled:(0,h.o)($.delete),children:F("delete")})})]})}}],O=(0,o.useMemo)((function(){return{total:n,current:M.pageNo,pageSize:M.pageSize,showTotal:function(e){return F("whatTotal",{total:e})},showSizeChanger:!0,showLessItems:!0,showQuickJumper:!0}}),[n,M,F]),U=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?[t]:A,C(!0),e.prev=2,e.next=5,(0,g.RC)(n);case 5:w.yw.success(F("whatSuccess",{what:F("delete")})),Y(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),C(!1);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),Y=(0,o.useCallback)((0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,(0,g.D$)(M);case 4:t=e.sent,z(t.data.data),m(t.data.total),C(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),C(!1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),[M]);return(0,o.useEffect)((function(){Y()}),[Y]),(0,o.useEffect)((function(){return Z.Z.on(k.y,Y),function(){Z.Z.off(k.y,Y)}}),[Y]),(0,x.jsx)("div",{style:{height:"100%"},ref:H,children:(0,x.jsx)(l.Z,{loading:j,columns:K,dataSource:_,bordered:!0,rowKey:"_id",scroll:{x:1200,y:T},pagination:O,onChange:function(e,t,n){B({pageNo:e.current,pageSize:e.pageSize,keyword:M.keyword})},rowSelection:{selectedRowKeys:A,onChange:function(e){E(e)}},title:function(){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(u.ZP.Group,{children:[(0,x.jsx)(u.ZP,{type:"primary",onClick:function(){G({id:"ProductAddOrEdit"})},disabled:(0,h.o)($.add),children:F("add")}),(0,x.jsx)(d.Z,{disabled:!A.length||(0,h.o)($.delete),title:F("areYouSureDelete"),onConfirm:function(){return U()},children:(0,x.jsx)(u.ZP,{type:"primary",disabled:!A.length||(0,h.o)($.delete),children:F("delete")})})]}),(0,x.jsx)("div",{style:{float:"right"},children:(0,x.jsx)(s.Z.Search,{onSearch:function(e){M.keyword!==e&&B({pageNo:1,pageSize:M.pageSize,keyword:e})},placeholder:F("queryByName"),enterButton:!0})})]})}})})}}}]);