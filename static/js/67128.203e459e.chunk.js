"use strict";(self.webpackChunkl_admin_react=self.webpackChunkl_admin_react||[]).push([[67128],{16835:function(e,n,t){t.d(n,{h:function(){return i}});var r=t(29439),c=t(47313),i=function(e){var n=(0,c.useState)(0),t=(0,r.Z)(n,2),i=t[0],u=t[1],o=(0,c.useRef)();(0,c.useEffect)((function(){return function(){clearInterval(o.current)}}),[]),(0,c.useEffect)((function(){i<=0&&clearInterval(o.current)}),[i]);var a=(0,c.useCallback)((function(){u(e),o.current=window.setInterval((function(){u((function(e){return e-1}))}),1e3)}),[e]),s=(0,c.useCallback)((function(){u(0),clearInterval(o.current)}),[]);return[i,a,s]}},20377:function(e,n,t){t.d(n,{l:function(){return i}});var r=t(838),c=t(92465),i=function(e){var n=c.Z.useToken();return(0,r.iv)(e(n))}},87842:function(e,n,t){t.d(n,{L6:function(){return c},Mn:function(){return r}});var r=function(e){return/^1[3456789]\d{9}$/.test(e)},c=function(e){return/^[a-zA-Z0-9]{7,10}$/.test(e)}},67128:function(e,n,t){t.r(n);var r=t(74165),c=t(15861),i=t(29439),u=t(47313),o=t(75590),a=t(20377),s=t(79930),l=t(5670),d=t(59491),f=t(38613),h=t(40440),p=t(68197),m=t(59624),v=t(10340),Z=t(52476),x=t(98457),k=t(51729),b=t(16835),j=t(87842),C=t(37413),g=t(46417);n.default=function(){var e=(0,u.useState)(!1),n=(0,i.Z)(e,2),t=n[0],w=n[1],I=(0,u.useState)(!1),P=(0,i.Z)(I,2),S=P[0],N=P[1],F=(0,u.useState)(!1),M=(0,i.Z)(F,2),y=M[0],E=M[1],_=(0,u.useState)(""),z=(0,i.Z)(_,2),$=z[0],q=z[1],B=s.Z.useForm(),L=(0,i.Z)(B,1)[0],R=(0,o.$G)().t,T=(0,v.C)((function(e){return e.userInfo})),V=(0,v.T)(),A=(0,b.h)(60),G=(0,i.Z)(A,3),H=G[0],O=G[1],W=G[2],D=(0,a.l)((function(e){e.token;return{fontSize:"20px",fontWeight:500,lineHeight:"28px",marginBottom:"12px"}})),J=(0,u.useMemo)((function(){return[{title:R("mobileNumber"),description:T.phone}]}),[R,T.phone]),K=(0,u.useMemo)((function(){return H>0?"".concat(R("retrieve")).concat(H,"s"):R("getVerificationCode")}),[H,R]),Q=(0,u.useCallback)((0,c.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.prev=1,e.next=4,L.validateFields(["phone"]);case 4:return n=e.sent,e.next=7,(0,k.x)(Number(null===n||void 0===n?void 0:n.phone));case 7:t=e.sent,q(t.data),O(),E(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),E(!1);case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),[O,L]),U=(0,u.useCallback)((0,c.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,e.next=4,L.validateFields();case 4:return n=e.sent,t=Number(n.phone),e.next=8,(0,x.Ng)({phone:t,code:n.code});case 8:C.yw.success(R("whatSuccess",{what:R("editPhone")})),V((0,Z.p)({phone:t})),N(!1),L.resetFields(),W(),q(""),w(!1),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),N(!1);case 20:case"end":return e.stop()}}),e,null,[[1,17]])}))),[W,V,L,R]),X=(0,u.useCallback)((function(){L.resetFields(),W(),q(""),w(!1)}),[W,L]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h1",{className:D,children:R("securitySetting")}),(0,g.jsx)(l.ZP,{itemLayout:"horizontal",dataSource:J,renderItem:function(e){return(0,g.jsx)(l.ZP.Item,{actions:[(0,g.jsx)(d.ZP,{type:"link",onClick:function(){w(!0)},children:R("edit")})],children:(0,g.jsx)(l.ZP.Item.Meta,{title:e.title,description:e.description})})}}),(0,g.jsx)(f.Z,{title:R("editPhone"),maskClosable:!1,okButtonProps:{loading:S},open:t,onOk:U,onCancel:X,children:(0,g.jsxs)(s.Z,{form:L,children:[(0,g.jsx)(s.Z.Item,{name:"phone",rules:[{required:!0,message:R("pleaseEnterMobileNumber")},function(){return{validator:function(e,n){return n&&!(0,j.Mn)(n)?Promise.reject(R("phoneRule")):Promise.resolve()}}}],children:(0,g.jsx)(h.Z,{placeholder:R("mobileNumber")})}),(0,g.jsxs)(p.Z,{gutter:16,children:[(0,g.jsx)(m.Z,{span:"16",children:(0,g.jsx)(s.Z.Item,{name:"code",rules:[{required:!0,message:R("pleaseEnterVerificationCode")}],children:(0,g.jsx)(h.Z,{placeholder:R("verificationCode")})})}),(0,g.jsx)(m.Z,{span:"8",children:(0,g.jsx)(d.ZP,{block:!0,loading:y,disabled:H>0,onClick:Q,children:K})})]}),$?(0,g.jsx)("div",{children:$}):null]})})]})}}}]);